---
allowed-tools: TodoWrite, TodoRead, Read, Write, MultiEdit, Bash(mkdir:*), Bash(gh pr view:*), Bash(gh pr diff:*), mcp__serena__find_file, mcp__serena__find_symbol, mcp__serena__list_memories, mcp__serena__search_for_pattern
description: プルリクエストの徹底的なコードレビューを確立されたガイドラインに従って実行し、コード品質、ベストプラクティス、保守性に焦点を当てて建設的なフィードバックを提供します
---

## コードレビュールール

コマンド引数で提供されたPR番号で指定されたプルリクエストをレビューしてください。

使用方法: `/code-review <PR番号>`
例: `/code-review 001`

PR番号は`$ARGUMENTS`として利用可能です。

レビュープロセス:

**重要: 既存のファイルやコードを調査する際は、必ずserenaを使用してください。serenaを使用することで、トークン消費量が60-80%削減され、セマンティック検索機能を通じて必要な情報を効率的に取得できます。**

1. **PR情報取得:** github cli (`gh pr view $arguments`)を使用してPRの詳細を取得します。
2. **PRから参照されているISSUE情報取得:** "gh issue view <ISSUE番号>"を使用してPRに関連するISSUEを取得します。
3. **変更確認:** "gh pr diff $arguments"を使用してコード変更を確認します。
4. **コードレビュー実行:** PRの詳細を確認し、コードレビューを実行します。
5. **レビュー実行:** 「コメント記述の重要ガイドライン」に従ってコードレビューを実行します。
6. **レビュー結果報告:** pull_request_reviewのようなものを使用する代わりに、レビュー結果を`.tmp`に保存します。改善点や懸念事項がある行にコメントを追加します。修正が明確な場合は、積極的に提案を行います。

**コメント記述の重要ガイドライン**

- **インラインコメント構造:**

  - **結論を先に記述:** 主要なポイントの一行要約を使用して、コードの差分、行数、ファイル名、レビュー内容を記述します。
  - **理由と提案:** 結論の後に、理由の詳細説明、背景、具体的な提案を提供します。
  - **問題に焦点:** インラインコメントは、バグ修正、潜在的なバグ、可読性の問題など、具体的な改善点に焦点を当てる必要があります。

- **ポジティブフィードバックについて:**

  - **インラインは選択的に:** 他の開発者が学べる例外的な設計選択や革新的な実装のみを言及します。
  - **ポジティブな点をまとめる:** レビュー提出時に、全体的なポジティブな側面と一般的な印象を要約コメントにまとめます。

- **レビュー形式**
  - **マークダウンでレビューを記述:** レビュー結果を`.tmp`に保存します。
  - **日本語でレビューを記述:** 以下の形式でコードレビューを記述してください。

---

# PR番号とタイトル

## 変更概要

## 変更ファイル

## コード変更の詳細分析

## レビューコメント

### 良い点

### 改善点・確認点

## 結論

---

**レビュー観点**

レビュー時は以下の側面に焦点を当ててください:

- CLAUDE.mdガイドラインへの準拠
- コード品質とベストプラクティスの遵守
  - 責務を適切に分離する
  - コードの再利用性を最大化する
  - 不要なコードを避ける
  - パフォーマンスへの影響が大きくない限り、すべてのAPIデータを返す
  - テストでオブジェクトの等価性を検証する
  - アプリ全体で一貫したスタイリングを適用する
  - 変数命名の一貫性を維持する
  - フロントエンドエラーは日本語で表示し、生のレスポンスを避ける
  - 適切な処理場所を検討する（バックエンド vs フロントエンド）
- バグやセキュリティリスクの確認
- パフォーマンスの懸念の特定
- 保守性と可読性の確保
- 設計とアーキテクチャの決定の検証

**追加注意事項**

- 日本語でフィードバックを提供してください。
- 具体的で実行可能なフィードバックを行ってください。

think super hard
