---
allowed-tools: TodoWrite, TodoRead, Read, Write, MultiEdit, Bash(mkdir:*), mcp__serena__find_file, mcp__serena__find_symbol, mcp__serena__list_memories, mcp__serena__search_for_pattern
description: 指定されたタスクの要件仕様を作成します（仕様駆動開発のステージ1）
---

## コンテキスト

- タスク内容: $ARGUMENTS

## あなたのタスク

### 1. ディレクトリの作成

- `.tmp`ディレクトリが存在しない場合は作成

### 2. ユーザーリクエストの分析

**重要: 既存のファイルやコードを調査する際は、必ずserenaを使用してください。serenaを使用することで、トークン消費量が60-80%削減され、セマンティック検索機能を通じて必要な情報を効率的に取得できます。**

提供されたタスク内容を慎重に分析し、以下を抽出してください：

- 解決すべき核心的な問題
- 明示的に述べられていない暗黙の要件
- 潜在的なエッジケースと制約
- 成功基準

### 3. 要件書の作成

以下のセクションで`.tmp/requirements.md`を作成してください：

```markdown
# 要件定義書 - [タスク名]

## 1. 目的

[このタスク/プロジェクトの目的を明確に記述]

## 2. 機能要件

### 2.1 必須機能

- [ ] [機能1の詳細説明]
- [ ] [機能2の詳細説明]
      ...

### 2.2 オプション機能

- [ ] [将来的に実装可能な機能]
      ...

## 3. 非機能要件

### 3.1 パフォーマンス

- [応答時間、処理速度などの要件]

### 3.2 セキュリティ

- [セキュリティに関する要件]

### 3.3 保守性

- [コードの保守性に関する要件]

### 3.4 互換性

- [既存システムとの互換性要件]

## 4. 制約事項

### 4.1 技術的制約

- [使用技術、ライブラリの制約]

### 4.2 ビジネス制約

- [納期、予算などの制約]

## 5. 成功基準

### 5.1 完了の定義

- [ ] [明確な完了条件1]
- [ ] [明確な完了条件2]
      ...

### 5.2 受け入れテスト

- [ユーザーが満足する条件]

## 6. 想定されるリスク

- [実装上のリスクと対策]

## 7. 今後の検討事項

- [設計フェーズで詳細化すべき事項]
```

### 4. TODOエントリの作成

TodoWriteを使用して「要件定義の完了とレビュー」をタスクとして追加

### 5. ユーザーへの提示

作成した要件書を表示し、以下を求めてください：

- 理解の確認
- 不足している要件
- 設計フェーズへの進行許可

## 重要な注意事項

- 暗黙の要件を特定することを徹底してください
- 現在のニーズと将来の拡張性の両方を考慮してください
- 明確で曖昧でない言葉を使用してください
- 測定可能な成功基準を含めてください

think hard
